<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">

<dom-module id="anime-item">
    <style>
        :host {
            display: block;
        }
        
        #itemContainer {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #itemTitle {
            height: auto;
            width: 100%;
            background: rgba(244,244,244,0.3);
            text-shadow: 0px 0px 10px rgba(255,255,255,0.6),
                         0px 0px 30px rgba(255,255,255,0.4),
                         0px 0px 50px rgba(255,255,255,0.3),
                         0px 0px 180px rgba(255,255,255,0.3);
            text-align: center;
            font-size: 18px !important;
            font-weight: 600 !important;
            transition: opacity 0.5s linear;
            color: black;
            @apply(--paper-font-subhead)
        }
        #itemDetails {
            box-sizing: border-box;
            position: absolute;
            top: calc(100% - 30px);
            min-height: 60px;
            max-height: 50%;
            overflow-y: hidden;
            height: auto;
            width: 100%;
            background: linear-gradient(rgba(244,244,244,0),
                                        rgba(244,244,244,0.4) 20px,
                                        rgba(244,244,244,0.8));
            text-shadow: 0px 0px 10px rgba(255,255,255,0.6),
                         0px 0px 30px rgba(255,255,255,0.4),
                         0px 0px 50px rgba(255,255,255,0.3),
                         0px 0px 180px rgba(255,255,255,0.3);
            transition: transform 0.5s ease-out;
        }
        #itemDetailsTitle {
            position: relative;
            opacity: 0;
            height: 30px;
            transition: opacity 0.5s  ease-out;
            white-space: nowrap;
            overflow: hidden;
            @apply(--shadow-elevation-2dp)
        }
        #itemDetailsTitle span {
            display: inline-block;
            padding-left: 100%;
            line-height: 30px !important;
            font-size: 18px !important;
            position: absolute;
            top: 0;
            left: 0;
            @apply(--paper-font-subhead)
        }
        #itemDetailsSub {
            box-sizing: border-box;
            width: 100%;
            text-align: center;
            overflow: hidden;
            @apply(--paper-font-body1)
        }
        #itemContainer:hover > #itemTitle {
            opacity: 0;
        }
        #itemContainer:hover > #itemDetails {
            transform: translateY(calc(-100% + 30px));
        }
        #itemContainer:hover > #itemDetails #itemDetailsTitle {
            opacity: 1;
        }
        #itemContainer:hover > #itemDetails #itemDetailsTitle span {
            -webkit-animation: marquee 15s linear infinite;
            -moz-animation: marquee 15s linear infinite;
            animation: marquee 15s linear infinite;
        }
        #itemContainer:hover > #itemDetails #itemDetailsSub span {
            bottom: 0;
        }
        @keyframes marquee {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        @-moz-keyframes marquee {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        @-webkit-keyframes marquee {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
    </style>
    <template>
        <paper-material id="itemContainer" elevation="4">
            <div id="itemTitle">[[animeName]]</div>
            <div id="itemDetails">
                <div id="itemDetailsTitle">
                    <span>[[animeName]]</span>
                </div>
                <div id="itemDetailsSub">
                    <span>
                        <content></content>
                    </span>
                </div>
            </div>
        </paper-material>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'anime-item',
        properties: {
            "animeName": {
                type: String
            },
            "animeImage": {
                type: String
            },
            "animeId": {
                type: Number,
                reflectToAttribute: true
            }
        },
        ready: function() {
            this.updateBackgroundImg(this.animeImage);
        },
        updateBackgroundImg: function(url) {
            this.$.itemContainer.style.background = "url("+url+")";
        },
    });
</script>